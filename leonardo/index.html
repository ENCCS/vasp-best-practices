<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For using LEONARDO (EuroHPC) &mdash; VASP Best Practices  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
      <link rel="stylesheet" type="text/css" href="../_static/overrides.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/minipres.js"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="../_static/togglebutton.js"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script data-domain="enccs.github.io/vasp-best-practices" defer="defer" src="https://plausible.io/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Useful tools" href="../tools/" />
    <link rel="prev" title="For using Tetralith (NAISS, NSC)" href="../tetralith/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            VASP Best Practices
              <img src="../_static/ENCCS.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Presentations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../presentations/">Collection of morning presentations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Start here first</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tetralith/">For using Tetralith (NAISS, NSC)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">For using LEONARDO (EuroHPC)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#user-account-and-login">User account and login</a></li>
<li class="toctree-l2"><a class="reference internal" href="#general-information">General information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-jobs">Running jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-job-script">Example job script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools/">Useful tools</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hands-on examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../fcc_Si/">fcc Si</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fcc_Si_DOS/">fcc Si DOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fcc_Si_bandstructure/">fcc Si bandstructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cd_Si/">cd Si</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cd_Si_vol_relax/">cd Si volume relaxation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cd_Si_relax/">cd Si relaxation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fcc_Ni/">fcc Ni</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fcc_Ni_rev/">fcc Ni revisited</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bandgap_Si/">Bandgap of Si using different DFT+HF methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Ni100_surface/">Ni100 surface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../more/">More examples and topics</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compiling VASP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../compile/">Different clusters, CPU and GPU</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">VASP Best Practices</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">For using LEONARDO (EuroHPC)</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/ENCCS/vasp-best-practices/blob/main/content/leonardo.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="for-using-leonardo-eurohpc">
<h1>For using LEONARDO (EuroHPC)<a class="headerlink" href="#for-using-leonardo-eurohpc" title="Permalink to this heading"></a></h1>
<p>Note that the hands-on part was adjusted to LEONARDO from Tetralith (and previous workshops), so there are some differences.</p>
<section id="user-account-and-login">
<h2>User account and login<a class="headerlink" href="#user-account-and-login" title="Permalink to this heading"></a></h2>
<p>See links sent out to the workshop participants for all information.</p>
</section>
<section id="general-information">
<h2>General information<a class="headerlink" href="#general-information" title="Permalink to this heading"></a></h2>
<p>There is some detailed <a class="reference external" href="https://wiki.u-gov.it/confluence/display/SCAIUS/HPC+User+Guide">LEONARDO user documentation available here</a>.</p>
</section>
<section id="running-jobs">
<h2>Running jobs<a class="headerlink" href="#running-jobs" title="Permalink to this heading"></a></h2>
<p>In each example for the hands-on part of the workshop, there’s a job script available called “run.sh”. The job script is submitted to the slurm job queue with</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sbatch run.sh
</pre></div>
</div>
<p>one can check its progress with the command</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>squeue -u USERNAME
</pre></div>
</div>
</section>
<section id="example-job-script">
<h2>Example job script<a class="headerlink" href="#example-job-script" title="Permalink to this heading"></a></h2>
<p>Typically, the workshop job scripts prepared for running on LEONARDO looks like this</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
#SBATCH -A EUHPC_TD02_030
#SBATCH -p boost_usr_prod
#SBATCH --qos=boost_qos_dbg
#SBATCH --time 00:15:00
#SBATCH -n 8
#SBATCH --ntasks-per-node=8
#SBATCH --cpus-per-task=1
#SBATCH --job-name=vaspjob

module use /leonardo_scratch/fast/EUHPC_TD02_030/vasp_ws2024/modules
module load VASP/6.4.3-cpu1
module load intel-oneapi-compilers/2023.2.1
module load intel-oneapi-mpi/2021.10.0
module load intel-oneapi-mkl/2023.2.0
module load hdf5/1.14.3--intel-oneapi-mpi--2021.10.0--oneapi--2023.2.0

export SRUN_CPUS_PER_TASK=$SLURM_CPUS_PER_TASK
export OMP_NUM_THREADS=1

srun vasp_std
</pre></div>
</div>
<p>since the examples are selected to be small and fast, only a few CPU cores (-n 8) on a LEONARDO boost partition node (in total 32 cores and 4 GPUs) is used.</p>
<p>“module use” is for activating modules which were created for the present workshop, e.g. for VASP. Note that the modules used for building VASP on LEONARDO needs to be loaded (on Tetralith, it’s sufficient to load the VASP module).</p>
<p>While OpenMP was included in the present build, OMP_NUM_THREADS=1 is set since hybrid MPI/OpenMP calculations are not used in the examples.</p>
<p>A basic analysis of the output can be done directly on the LEONARDO cluster, e.g. with gnuplot and py4vasp, further analysis can be made on a local computer. For instance, visualizing the structures with VESTA and running p4vasp and py4vasp (via jupyter-lab).</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tetralith/" class="btn btn-neutral float-left" title="For using Tetralith (NAISS, NSC)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tools/" class="btn btn-neutral float-right" title="Useful tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Weine Olovsson and contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>